import{c as E,d as D,f as g,g as k,h as A,i as F,m as N}from"./chunk-VC3SQ3YH.js";import{a as j}from"./chunk-CVD3T6AB.js";import{d as R,f as y}from"./chunk-SPIBSKG6.js";import{Cc as P,Dc as I,Ec as w,Fa as o,Fb as i,Gb as b,Hb as l,Ib as h,Ka as s,Ra as p,Sb as x,Ub as m,Va as u,Vb as v,Wb as C,gc as _,ib as d,jb as n,kb as r,rb as f,vc as S,wc as O,xc as M}from"./chunk-S46BXV3G.js";var Y=(a,t,e)=>({"bg-status-success":a,"bg-status-warning":t,"bg-status-fail":e});function z(a,t){if(a&1&&(n(0,"div",5)(1,"h1",6),i(2),r()()),a&2){let e=f();o(2),l("\u{1F4CA} ",e.student==null?null:e.student.username,"'s Exam Results")}}function B(a,t){if(a&1&&(n(0,"div",7)(1,"div",8)(2,"div",9)(3,"h5",10),i(4),r(),n(5,"h6",11),i(6),r(),n(7,"div",12)(8,"div",13)(9,"span",14),i(10,"Description"),r(),n(11,"span",15),i(12),m(13,"slice"),r()(),n(14,"div",13)(15,"span",14),i(16,"Score"),r(),n(17,"span",16)(18,"span",17),i(19),r()()(),n(20,"div",13)(21,"span",14),i(22,"Status"),r(),n(23,"span",16)(24,"span",18),i(25),r()()(),n(26,"div",13)(27,"span",14),i(28,"Attempted At"),r(),n(29,"span",19),i(30),m(31,"date"),r()()()()()()),a&2){let e=t.$implicit;d("@fadeInStagger",void 0),o(4),b(e.exam.title),o(2),l(" Attempt #",e.attemptNumber," "),o(6),h(" ",C(13,9,e.exam.description,0,80),"",e.exam.description.length>80?"...":""," "),o(7),l(" ",e.score," "),o(5),d("ngClass",x(16,Y,e.status==="Completed",e.status==="Started",e.status==="Failed")),o(),l(" ",e.status," "),o(5),l(" ",v(31,13,e.takenAt,"medium")," ")}}function T(a,t){a&1&&(n(0,"div",20)(1,"p",21),i(2,"No results found for this student."),r()())}var L=class a{constructor(t,e,c,H,W){this.resultService=t;this.studentService=e;this.router=c;this.activeRoute=H;this.cdr=W}results=[];student;studentId;isLoading=!0;ngOnInit(){this.activeRoute.params.subscribe(t=>{if(this.studentId=+t.studentId,!this.studentId)return this.router.navigate(["/not-found"]);this.loadStudent()?.subscribe({next:e=>{this.isLoading=!1,this.loadResults()},error:e=>{this.isLoading=!1,console.error("Error fetching the results:",e)}})})}loadStudent(){if(!this.studentId){console.error("Student ID is not set.");return}let t=this.studentService.getStudentById(this.studentId);return t.subscribe({next:e=>{console.log("Student:",e),this.student=e,this.cdr.detectChanges()},error:e=>{this.router.navigate(["/not-found"]),console.error("Error fetching student:",e)}}),t}loadResults(){if(!this.studentId){console.error("Student ID is not set.");return}this.resultService.getResultByStudentId(this.studentId).subscribe({next:t=>{console.log("Result:",t),this.results=t?.data?.$values?.filter(e=>e.exam?.id!=null&&e.exam?.id!=null)||[],this.cdr.detectChanges()},error:t=>{console.error("Error fetching result:",t)}})}static \u0275fac=function(e){return new(e||a)(s(N),s(j),s(y),s(R),s(_))};static \u0275cmp=p({type:a,selectors:[["app-show-result"]],decls:5,vars:3,consts:[[1,"container","my-4"],["class","header animate-fade-in text-center mb-5",4,"ngIf"],[1,"row"],["class","col-12 col-md-6 mb-4",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"header","animate-fade-in","text-center","mb-5"],[1,"display-5","fw-bold"],[1,"col-12","col-md-6","mb-4"],[1,"card","result-card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"card-title","mb-2"],[1,"card-subtitle","text-muted","mb-4"],[1,"result-details"],[1,"detail-row"],[1,"label"],[1,"value","text-truncate"],[1,"value"],[1,"badge","bg-score"],[1,"badge",3,"ngClass"],[1,"value","text-muted","small"],[1,"text-center"],[1,"text-muted"]],template:function(e,c){e&1&&(n(0,"div",0),u(1,z,3,1,"div",1),n(2,"div",2),u(3,B,32,20,"div",3),r(),u(4,T,3,0,"div",4),r()),e&2&&(o(),d("ngIf",!c.isLoading),o(2),d("ngForOf",c.results),o(),d("ngIf",c.results.length===0&&!c.isLoading))},dependencies:[w,S,O,M,I,P],styles:[".header[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:30px;margin-bottom:30px;border:1px solid rgba(255,255,255,.2);text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0 0}.result-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8eaf6,#f3e5f5);border:none;border-radius:1rem;color:#333;transition:transform .3s ease,box-shadow .3s ease;overflow:hidden;padding:.5rem}.result-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #0000001a}.result-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#3949ab;font-weight:700;font-size:1.25rem}.result-card[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{color:#7e57c2;font-size:.95rem}.result-card[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-top:.5rem}.result-card[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed rgba(0,0,0,.05);padding-bottom:.4rem}.result-card[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#3a3f73}.result-card[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;display:flex;align-items:center;text-align:right}.result-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.4em .7em;border-radius:.5rem}.result-card[_ngcontent-%COMP%]   .bg-score[_ngcontent-%COMP%]{background:linear-gradient(to right,#5c6bc0,#7e57c2);color:#fff}.result-card[_ngcontent-%COMP%]   .bg-status-success[_ngcontent-%COMP%]{background-color:#66bb6a;color:#fff}.result-card[_ngcontent-%COMP%]   .bg-status-warning[_ngcontent-%COMP%]{background-color:#ffa726;color:#fff}.result-card[_ngcontent-%COMP%]   .bg-status-fail[_ngcontent-%COMP%]{background-color:#ef5350;color:#fff}.header.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInHeader 1s ease forwards}@keyframes _ngcontent-%COMP%_fadeInHeader{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.result-card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease;cursor:pointer}.result-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.01);box-shadow:0 16px 32px #00000026}"],data:{animation:[E("fadeInStagger",[k("* => *",[A(":enter",[g({opacity:0,transform:"translateY(20px)"}),F("100ms",[D("600ms ease-out",g({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};export{L as ShowResults};
